#include <stdint.h>
#define NUM_PAGES 52

static const char trimming[] = {
	46, 0, 0, 1, 3, 0, 0, 0,
	0, 0, 0, 0, 0, 46, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
};

static const char codechars[52] = {
	' ',
        '0',
        '1',
        '2',
        '3',
        '4',
        '5',
        '6',
        '7',
        '8',
        '9',
        'A',
        'B',
        'C',
        'D',
        'E',
        'F',
        'G',
        'H',
        'I',
        'J',
        'K',
        'L',
        'M',
        'N',
        'O',
        'P',
        'Q',
        'R',
        'S',
        'T',
        'U',
        'V',
        'W',
        'X',
        'Y',
        'Z',
        ')', // Shifted number line on US QWERTY for yellow
        '!', 
        '@',
        '#',
        '$',
        '%',
        '^',
        '&',
        '*',
        '(', // End of yellow numbers
        '+', // *
        '-',
        '.',
        ':',
        ';' // Yellow colon
};

uint8_t page_lookup(char c, int addr)
{
	int ret = 45; // '*'

	int trim = trimming[addr];
	int i;
	
	for (i = 0; i < sizeof(codechars); i++) {
		if (codechars[i] == c) {
			ret = i;
			break;
		}
	}

	return (i + trim) % NUM_PAGES;
}

char code_lookup(uint8_t page, int addr)
{
	int trim = trimming[addr];

	page = (page - trim - 32 + NUM_PAGES) % NUM_PAGES;
	return codechars[page];
}

/*
uint8_t page_lookup[] = {
    0, 45, 45, 45, 45, 45, 45, 45,
    45, 45, 45, 45, 45, 46, 47, 45,
    1, 2, 3, 4, 5, 6, 7, 8,
    48, 45, 45, 45, 45, 45, 45, 9,
    10, 11, 12, 13, 14, 15, 16, 17,
    18, 19, 20, 21, 22, 23, 24, 25,
    26, 27, 28, 29, 30, 31, 32, 33,
    34, 45, 45, 45, 45, 45, 45, 9,
    10, 11, 12, 13, 14, 15, 16, 17,
    18, 19, 20, 21, 22, 23, 24, 25,
    26, 27, 28, 29, 30, 31, 32, 33,
    34, 
     0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0,
};
*/
